# Skill: best-practices（業界水準・ベストプラクティス検証）

## 目的
実装が業界標準のベストプラクティスに準拠しているか検証し、品質を担保する。

## 前提条件
- 実装が完了し、テストが通過している
- `code-review` スキルが完了している

## 手順

### Step 1: プロジェクト構成の検証

#### ディレクトリ構成
- [ ] 標準的なプロジェクト構成に従っているか
- [ ] 関心の分離が適切か（src/tests/docs/config の分離）
- [ ] 設定ファイルが適切な場所にあるか

#### 依存管理
- [ ] ロックファイルがコミットされているか（package-lock.json, poetry.lock等）
- [ ] 不要な依存が含まれていないか
- [ ] バージョン指定が適切か（^やrangeではなく固定を推奨）

#### 環境管理
- [ ] 環境変数がハードコードされていないか
- [ ] `.env.example` が提供されているか
- [ ] 機密情報が `.gitignore` に含まれているか

### Step 2: コード品質の業界水準チェック

#### アーキテクチャ
- [ ] SOLID原則に概ね従っているか
- [ ] レイヤードアーキテクチャ or クリーンアーキテクチャが意識されているか
- [ ] 外部依存への結合度が低いか（DI, Interface等）

#### エラーハンドリング
- [ ] エラーが適切にハンドリングされているか
- [ ] ユーザー向けエラーと内部エラーが区別されているか
- [ ] ログ出力が適切か（機密情報をログに出さない）

#### テスト
- [ ] テストカバレッジが十分か（目標: 80%以上）
- [ ] テストが独立して実行可能か
- [ ] テストが決定的か（フレーキーでないか）
- [ ] テストピラミッドのバランスが取れているか

### Step 3: セキュリティのベストプラクティス

#### 認証・認可
- [ ] パスワードが適切にハッシュ化されているか（bcrypt, argon2等）
- [ ] セッション管理が安全か
- [ ] CORS設定が適切か

#### データ保護
- [ ] 入力サニタイゼーションが実装されているか
- [ ] SQLインジェクション対策（パラメータバインディング等）
- [ ] XSS対策（出力エスケープ等）

#### インフラ
- [ ] HTTPS前提の設定か
- [ ] セキュリティヘッダーが設定されているか
- [ ] レート制限が考慮されているか

### Step 4: CI/CDのベストプラクティス

- [ ] 自動テストがCI/CDに組み込まれているか
- [ ] リンター/フォーマッターが統一されているか
- [ ] ビルドが再現可能か
- [ ] デプロイが自動化されているか（可能な範囲で）

### Step 5: ドキュメント

- [ ] READMEにセットアップ手順があるか
- [ ] APIドキュメントが存在するか（該当する場合）
- [ ] 主要な設計判断が記録されているか

### Step 6: レポート生成
```
## ベストプラクティス検証レポート
- 検証日時: YYYY-MM-DD HH:MM
- 対象: [プロジェクト or モジュール名]

### スコアカード
| カテゴリ | チェック項目数 | 準拠数 | 準拠率 |
|----------|---------------|--------|--------|
| プロジェクト構成 | N | N | N% |
| コード品質 | N | N | N% |
| セキュリティ | N | N | N% |
| CI/CD | N | N | N% |
| ドキュメント | N | N | N% |
| **総合** | **N** | **N** | **N%** |

### 要改善事項（優先度順）
1. [カテゴリ] [内容] - [推奨対応]

### 良好な点
- [特に優れている点を記載]
```

## 判定基準
- **優秀（90%以上）**: ベストプラクティスに高度に準拠
- **良好（70-89%）**: 概ね準拠、軽微な改善余地あり
- **要改善（50-69%）**: 複数の改善が必要
- **不十分（50%未満）**: 大幅な改善が必要

## 出力
- ベストプラクティス検証レポート
- 要改善事項の優先度付きリスト
- 改善タスクの提案（`tasks/` に追加可能な形式）
